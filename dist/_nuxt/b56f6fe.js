(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{366:function(e,r,o){"use strict";o.r(r);o(38),o(22);var t={data:function(){return{refill:!1,refresh:null,pushed:!1,user:this.$store.state.user}},mounted:function(){localStorage.getItem("energy")&&"true"==localStorage.getItem("energy")&&(this.refill=!0,this.launch())},methods:{launch:function(){var e=this;this.refresh=setInterval((function(){if(e.user=e.$store.state.user,e.user.energy<=e.user.max_energy/4&&!e.pushed)if(e.user.ressources.FOOD>=1){var r=parseInt((e.user.max_energy-e.user.energy)/5),o=parseInt(e.user.ressources.FOOD);console.log("need to refill and got food"),console.log("needed",r),console.log("have",o),console.log(parseInt(o<r));var t=e.user.max_energy-e.user.energy;o<r&&(t=5*o),console.log("asked for",t);var n={id:"refill",action:{actions:[{account:"farmersworld",name:"recover",authorization:[{actor:e.$store.state.user.name,permission:"active"}],data:{owner:e.$store.state.user.name,energy_recovered:t}}]},block:{blocksBehind:3,expireSeconds:30}};e.pushed=!0,e.$store.commit("user/addRAction",n),setTimeout((function(){e.pushed=!1,console.log("energy available")}),6e4),console.log("asked for energy")}else console.log("need to refill but no food");else console.log("no need")}),15e3)},stop:function(){clearInterval(this.refresh)},switchRef:function(){this.refill=!this.refill,this.refill?(this.launch(),localStorage.setItem("energy","true")):(this.stop(),localStorage.setItem("energy","false"))}}},n=o(66),component=Object(n.a)(t,(function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",[o("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{size:"sm",title:"Activate this to refill your energy when you are lower than 25% of your maximum.",variant:e.refill?"success":"danger"},on:{click:e.switchRef}},[e._v("Auto Energy: "+e._s(e.refill?"ON":"OFF"))])],1)}),[],!1,null,null,null);r.default=component.exports}}]);