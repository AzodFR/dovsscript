(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{355:function(e,t,r){"use strict";r.r(t);var n,o,c,l,h,m=r(28),d=(r(38),r(1),r(22),r(126),r(10),r(23),r(15),r(3),r(79),r(102),r(124),r(67),r(230).JsonRpc),time=15e3,f={name:"Interval",mounted:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||(e.checkRPC(),e.launchCheck()),e.fetchTokens(),e.fetchTemplate(),e.launchFetchStake(),e.launchIntervalTokens(),e.fetchItems("user"),e.fetchBuilding(),e.launchIntervalItems();case 8:case"end":return t.stop()}}),t)})))()},methods:{launchCheck:(h=Object(m.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval(Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.checkRPC();case 1:case"end":return e.stop()}}),e)}))),6e5);case 1:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)}),checkRPC:(l=Object(m.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,setTimeout((function(){t?(t=!1,console.log("rpc checked")):(console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),(localStorage.getItem("blockedRPC")||"true"==localStorage.getItem("blockedRPC"))&&(t=!0),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/")}),2e4),e.prev=2,r=new d(this.$store.state.user.wax.rpc.endpoint,{fetch:fetch}),e.next=6,r.get_info().catch((function(e){t=!1,console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/"})).then((function(){t=!0}));case 6:e.next=15;break;case 8:e.prev=8,e.t0=e.catch(2),t=!1,console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/";case 15:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return l.apply(this,arguments)}),launchFetchStake:function(){var e=this;this.fetchStake(),setInterval((function(){e.fetchStake()}),time)},fetchTemplate:(c=Object(m.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_table_rows"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"json":true,"code":"dovutilstake","scope":"dovutilstake","table":"bdata","lower_bound":null,"upper_bound":null,"index_position":1,"key_type":"","limit":"100","reverse":false,"show_payer":true}',method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.rows,console.log("template",n),t.$store.commit("user/setTemplate",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),fetchRss:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_table_rows"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"json":true,"code":"dovutilstake","scope":"'.concat(e.$store.state.user.name,'","table":"balances","lower_bound":null,"upper_bound":null,"index_position":1,"key_type":"","limit":"100","reverse":false,"show_payer":true}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var t=Object(m.a)(regeneratorRuntime.mark((function t(r){var n,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=r.rows,console.log("resss",n),o=["DOVF","DOVH","DOVR","DOVS","DOVX"],i=0;i<n.length;i++)console.log("resi",n[i].data),o.splice(o.indexOf(n[i].data.balance.split(" ")[1]),1),e.$store.commit("user/setRessource",{type:n[i].data.balance.split(" ")[1],value:n[i].data.balance.split(" ")[0]});for(c=0;c<o.length;c++)null==e.$store.state.user.ressources[o[c]]&&e.$store.commit("user/setRessource",{type:o[c],value:"0.0000"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},fetchBuilding:(o=Object(m.a)(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,fetch("".concat(this.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_table_rows"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"json":true,"code":"dovutilstake","scope":"dovutilstake","table":"mships","table_key":"","lower_bound":"'.concat(this.$store.state.user.name,'","upper_bound":"').concat(this.$store.state.user.name,'","index_position":2,"key_type":"i64","limit":"10","reverse":false,"show_payer":false}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("clock",t),(n=r.rows).length>0)for(i in n)t+=parseInt(n[i].rarity);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.next=5,fetch("".concat(this.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_table_rows"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"json":true,"code":"dovutilstake","scope":"dovutilstake","table":"buildings","table_key":"","lower_bound":"'.concat(this.$store.state.user.name,'","upper_bound":"').concat(this.$store.state.user.name,'","index_position":2,"key_type":"i64","limit":"10","reverse":false,"show_payer":false}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(n){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.rows,c=[],o.forEach((function(e){e.next_availability=new Date(1e3*e.last_claim+(t?3600*t*1e3:1e3*e.delay)),e.name=e.asset_id,r.$store.state.user.logged_asset.includes(e.asset_id)||r.$store.commit("user/addAsset",e.asset_id),localStorage.getItem("".concat(e.asset_id))&&("true"==localStorage.getItem("".concat(e.asset_id))?(r.$store.commit("user/setAutoClaim",{type:"buildings",id:e.asset_id,value:!0}),r.checker=!0):r.$store.commit("user/setAutoClaim",{type:"buildings",id:e.asset_id,value:!1})),c.push(e)})),console.log("build",o),r.$store.commit("user/setBuildings",o),c.length&&r.$store.commit("user/setItem",{value:c,type:"buildings"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),fetchStake:(n=Object(m.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_account"),{credentials:"omit",headers:{"Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"account_name":"'.concat(this.$store.state.user.name,'"}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("user/setStake",parseFloat(r.total_resources.cpu_weight.split(" ")[0]).toFixed(2)),t.$store.commit("user/setCPU",(100*r.cpu_limit.used/r.cpu_limit.max).toFixed(0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),launchIntervalItems:function(){var e=this;setInterval((function(){e.fetchItems("user"),e.fetchBuilding()}),time)},fetchItems:function(e){var t=this;return Object(m.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(t.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_table_rows"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"json":true,"code":"dovsmartrepo","scope":"dovsmartrepo","table":"'.concat(e,'","table_key":"","lower_bound":"').concat(t.$store.state.user.name,'","upper_bound":"').concat(t.$store.state.user.name,'","limit":"1","reverse":false,"show_payer":false}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(r){var data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.rows.length<=0)){e.next=2;break}return e.abrupt("return");case 2:console.log(r.rows[0].data[0]),data=r.rows[0].data[0],n={name:data.pool,next_availability:1e3*data.last_claim+36e5*(localStorage.vip?parseInt(localStorage.vip):1),asset_id:"1",charged_time:3600},t.$store.state.user.logged_asset.includes(n.asset_id)||t.$store.commit("user/addAsset",n.asset_id),localStorage.getItem("".concat(n.asset_id))&&("true"==localStorage.getItem("".concat(n.asset_id))?(t.$store.commit("user/setAutoClaim",{type:"pool",id:n.asset_id,value:!0}),t.checker=!0):t.$store.commit("user/setAutoClaim",{type:"pool",id:n.asset_id,value:!1})),t.$store.commit("user/setItem",{value:[n],type:"pool"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},launchIntervalTokens:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchTokens(),e.fetchRss(),setInterval((function(){e.fetchTokens(),e.fetchRss()}),time);case 3:case"end":return t.stop()}}),t)})))()},fetchTokens:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_currency_balance"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"code":"dovvaultfort","account":"'.concat(e.$store.state.user.name,'"}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log("tokens",t);for(var r=["DOVF","DOVH","DOVR","DOVS","DOVX"],i=0;i<t.length;i++)console.log(t[i].split(" ")[0],t[i].split(" ")[1]),r.splice(r.indexOf(t[i].split(" ")[1]),1),e.$store.commit("user/setToken",{type:t[i].split(" ")[1],value:null!=t[i]?t[i].split(" ")[0]:"0.0000"});for(var n=0;n<r.length;n++)e.$store.commit("user/setToken",{type:r[n],value:"0.0000"})}));case 2:return t.next=4,fetch("".concat(e.$store.state.user.wax.rpc.endpoint,"/v1/chain/get_currency_balance"),{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3","Content-Type":"text/plain;charset=UTF-8","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site"},body:'{"code":"eosio.token","account":"'.concat(e.$store.state.user.name,'","symbol":"WAX"}'),method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(t){null==t[0]?e.$store.commit("user/setToken",{type:"WAX",value:"0.0000"}):e.$store.commit("user/setToken",{type:"WAX",value:null!=t[0]?t[0].split(" ")[0]:"0.0000"})}));case 4:case"end":return t.stop()}}),t)})))()}}},v=f,S=r(66),component=Object(S.a)(v,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports}}]);