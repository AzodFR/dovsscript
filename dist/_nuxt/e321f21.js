(window.webpackJsonp=window.webpackJsonp||[]).push([[12,3,5,13],{322:function(t,e,n){var content=n(329);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(101).default)("8ba7c276",content,!0,{sourceMap:!1})},323:function(t,e,n){var content=n(331);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(101).default)("10fcbe00",content,!0,{sourceMap:!1})},324:function(t,e,n){"use strict";n.r(e);var o=n(28),l=(n(67),n(38),n(124),n(125),n(1),n(22),{name:"Counter",props:["timestamp","autoclaim","item","claiminfo"],data:function(){return{msg:"Ready to claim",wait:!1,loaded:!1,readyToClaim:!1,last:void 0,queued:!1,displayHours:0,displayMinutes:0,displaySeconds:0,manual:!1}},computed:{ISreadyToClaim:function(){return this.readyToClaim},_seconds:function(){return 1e3},_minutes:function(){return 60*this._seconds},_hours:function(){return 60*this._minutes},remainingTime:function(){return this.loaded?this.displayHours+":"+this.displayMinutes+":"+this.displaySeconds:"Getting remaining time..."}},watch:{timestamp:function(){this.loaded=!1,this.showRemaining()},autoclaim:function(){this.autoclaim&&(this.loaded=!1,this.showRemaining())}},mounted:function(){var t=this;this.showRemaining(),this.$on("".concat(this.item.asset_id,".claiming"),(function(){t.last=Date.now(),console.log("received claiming!"),t.msg="Claiming..."})),this.$on("test",(function(t){console.log("counter receive test",t)})),this.$on("".concat(this.item.asset_id,".success"),(function(){t.last=Date.now(),console.log("received success!"),t.msg="Ready to claim",t.readyToClaim=!1,t.queued=!1,setTimeout((function(){t.last=void 0}),1e4),t.showRemaining()})),this.$on("".concat(this.item.asset_id,".retry"),(function(e){console.log("received retry!"),t.msg="Retry to claim/repair... (".concat(e,")")}))},methods:{checkManual:function(){var t=this.timestamp,e=new Date,n=new Date(t);return parseInt((n.getTime()-e.getTime())/1e3/this.item.charged_time+1).toFixed(0)>0},manualClaim:function(){var t=this;this.checkManual()&&(this.manual=!0,this.handleClaim(),setTimeout((function(){t.manual=!1}),5e3))},showRemaining:function(){var t=this,e=setInterval((function(){var n=new Date,o=t.timestamp,l=new Date(o).getTime()-n.getTime();if(l<=0)return clearInterval(e),null==t.last&&(t.readyToClaim=!0),t.loaded=!0,!0===t.$store.state.user.autoclaim[t.claiminfo.type][t.item.asset_id]&&t.handleClaim(),null;t.readyToClaim=!1;var r=Math.floor(l/t._hours),c=Math.floor(l%t._hours/t._minutes),m=Math.floor(l%t._minutes/t._seconds);t.displayHours=r<10?"0"+r:r,t.displayMinutes=c<10?"0"+c:c,t.displaySeconds=m<10?"0"+m:m,t.loaded=!0}),1e3)},handleClaim:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.$store.state.user.actions.find((function(e){return e.id===t.item.id}))){e.next=2;break}return e.abrupt("return");case 2:if(!t.queue){t.queued=!0;try{data="pool"==t.claiminfo.type?{_user:t.$store.state.user.name}:{asset_ids:[t.item.asset_id]},n={actions:[{account:"pool"==t.claiminfo.type?"dovsmartrepo":"dovutilstake",name:t.claiminfo.action,authorization:[{actor:t.$store.state.user.name,permission:"active"}],data:data}]},o={blocksBehind:3,expireSeconds:30},l={id:t.item.asset_id,action:n,block:o},null==t.last&&(t.readyToClaim=!0,console.log("add to queue"),t.$store.commit("user/addAction",l),t.msg="Claim in queue...")}catch(t){console.log(t)}}case 3:case"end":return e.stop()}}),e)})))()}}}),r=(n(328),n(66)),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.readyToClaim?n("button",{staticClass:"EnBtn",on:{click:t.handleClaim}},[t._v(t._s(t.msg))]):n("button",{staticClass:"DisBtn",attrs:{disabled:!t.checkManual()},on:{click:t.manualClaim}},[t._v("\n    "+t._s(t.remainingTime)+"\n  ")]),t._v(" "),t.wait?n("b-spinner",{staticClass:"spinner-login",attrs:{label:"Spinning"}}):t._e()],1)}),[],!1,null,"2a2c9f54",null);e.default=component.exports},325:function(t,e,n){"use strict";n.r(e);var o={name:"LocalAutoClaimButton",props:{type:String,id:String},data:function(){return{value:this.$store.state.user.autoclaim[this.type][this.id]}},methods:{autoOne:function(){var t=this.$store.state.user.autoclaim[this.type][this.id];t&&(localStorage.setItem("".concat(this.type,"AutoClaim"),"false"),this.$store.commit("user/setAutoClaim",{type:this.type,id:"global",value:!1}),this.$root.$emit("".concat(this.type,"disableClaimAll"))),localStorage.setItem("".concat(this.id),"".concat(!t)),this.$store.commit("user/setAutoClaim",{type:this.type,id:this.id,value:!t}),this.value=this.$store.state.user.autoclaim[this.type][this.id]}},mounted:function(){var t=this;this.$root.$on("".concat(this.type,"autoClaimAll"),(function(){localStorage.setItem("".concat(t.id),"true"),t.$store.commit("user/setAutoClaim",{type:t.type,id:t.id,value:!0}),t.value=t.$store.state.user.autoclaim[t.type][t.id]}))}},l=(n(330),n(66)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{class:t.value?"success":"danger",attrs:{variant:t.value?"success":"danger",size:"sm"},on:{click:t.autoOne}},[t._v("\n    C "+t._s(t.value?"[ON]":"[OFF]")+"\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports},328:function(t,e,n){"use strict";n(322)},329:function(t,e,n){var o=n(100)(!1);o.push([t.i,"button[data-v-2a2c9f54]{border-radius:5px;border:none;font-weight:700;box-shadow:1px 1px 0 1px rgba(0,0,0,.2)}.DisBtn[data-v-2a2c9f54]{background:#d38c09;color:#0f0c05}.DisBtn[data-v-2a2c9f54],.EnBtn[data-v-2a2c9f54]{font-size:small}.EnBtn[data-v-2a2c9f54]{background:#28a745;color:#0f1b0e}",""]),t.exports=o},330:function(t,e,n){"use strict";n(323)},331:function(t,e,n){var o=n(100)(!1);o.push([t.i,".local-button{font-size:small}",""]),t.exports=o},332:function(t,e,n){var content=n(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(101).default)("a1a157f8",content,!0,{sourceMap:!1})},336:function(t,e,n){"use strict";n.r(e);n(1),n(3);var o={name:"AutoClaimButton",props:{type:String},data:function(){return{actual:!1}},methods:{autoAll:function(){var t=this;localStorage.setItem("".concat(this.type,"AutoClaim"),!0),this.$store.commit("user/setAutoClaim",{type:this.type,id:"global",value:!0}),this.$store.state.user.items[this.type].forEach((function(e){localStorage.setItem(e.asset_id,!0),t.$store.commit("user/setAutoClaim",{type:t.type,id:e.asset_id,value:!0})})),this.actual=!0,this.$root.$emit("".concat(this.type,"autoClaimAll"))}},mounted:function(){var t=this;localStorage.getItem("".concat(this.type,"AutoClaim"))&&("true"==localStorage.getItem("".concat(this.type,"AutoClaim"))&&(this.actual=!0,this.$store.commit("user/setAutoClaim",{type:this.type,id:"global",value:!0}),this.$store.state.user.items[this.type].forEach((function(e){localStorage.setItem(e.asset_id,"true"),t.$store.commit("user/setAutoClaim",{type:t.type,id:e.asset_id,value:!0})}))));this.$root.$on("".concat(this.type,"disableClaimAll"),(function(){t.actual=!1}))}},l=n(66),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{staticClass:"buttonAll",attrs:{variant:t.actual?"success":"",disabled:t.actual},on:{click:t.autoAll}},[t._v("\n    Auto Claim All\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports},342:function(t,e,n){"use strict";n(332)},343:function(t,e,n){var o=n(100)(!1);o.push([t.i,".items-claim{margin-top:2%}.title{background-color:hsla(0,0%,50.2%,.534);text-align:center}.allBtn-1,.blank,.title{display:inline-block;width:30%;font-size:large}.allBtn-1{text-align:right}.allBtn-2{display:inline-block;width:30%;font-size:large;text-align:left}.buttonAll{font-size:small;text-decoration:none;size:0}.item-name{font-size:small;text-align:right}.counter-div,.item-name{display:inline-block;width:15%}.counter-div{text-align:center}.item-durability{display:inline-block;font-size:small;width:15%;text-align:right}.success{size:0}.danger,.success{font-size:.7em;font-weight:none}.danger{height:100%}.claim-btn{text-align:right}.claim-btn,.repair-btn{display:inline-block;width:15%}.repair-btn{text-align:left}.blank2,.info-pop{display:inline-block;width:15%}.info-pop{text-align:left}",""]),t.exports=o},350:function(t,e,n){"use strict";n.r(e);n(5),n(4),n(2),n(1),n(6),n(3),n(7);var o=n(0),l=(n(230),n(124),n(324)),r=n(325),c=n(78);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={props:{title:String,toTrim:Number,list:Array,type:String,show:Object,claimInfo:Object,hideDura:Boolean},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)(["user/getMembers"])),methods:{calc:function(t){var e=t.next_availability+this.member*t.charged_time,n=new Date,o=new Date(1e3*e).getTime()-n.getTime();return parseInt(this.member-o/1e3/t.charged_time+1).toFixed(0)}},components:{CounterV2:l.default,LocalAutoClaimButton:r.default},mounted:function(){var t=this;this.$root.$on("test",(function(e){console.log("itemclaim receive test from ",e),t.$refs.counter[0].$emit("test",e)})),this.$root.$on("claiming",(function(e){console.log("itemclaim receive claiming from ",e),t.$refs.counter[0].$emit("".concat(e,".claiming"))})),this.$root.$on("success",(function(e){console.log("itemclaim receive success from ",e),t.$refs.counter[0].$emit("".concat(e,".success"))})),this.$root.$on("retry",(function(e){console.log("itemclaim receive retry from ",e.id),t.$refs.counter[0].$emit("".concat(e.id,".retry"),e.retry)}))}},f=d,h=(n(342),n(66)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.list.length>0?n("div",[n("label",{staticClass:"title"},[t._v(t._s(t.title)+"   "),n("img",{staticClass:"game-img",attrs:{alt:""}})]),t._v(" "),t.show.claimAll?n("AutoClaimButton",{staticClass:"allBtn-1",attrs:{type:t.type}}):n("div",{staticClass:"blank"}),t._v(" "),n("div",{staticClass:"blank"})],1):t._e(),t._v(" "),n("div",{staticClass:"items-claim"},t._l(t.list,(function(e,i){return n("div",{key:i,staticClass:"item-claim"},[n("label",{staticClass:"item-name"},[t._v(t._s(e.name.slice(t.toTrim)))]),t._v(" "),n("CounterV2",{ref:"counter",refInFor:!0,staticClass:"counter-div",attrs:{item:e,timestamp:e.next_availability,claiminfo:t.claimInfo,autoclaim:"this.$store.state.user.items['"+t.type+"']['item.asset_id']"===!0}}),t._v(" "),t.hideDura?n("div",{staticClass:"item-durability"}):n("label",{staticClass:"item-durability"},[t._v(t._s(e.current_durability)+"/"+t._s(e.durability))]),t._v(" "),t.show.localClaim?n("LocalAutoClaimButton",{staticClass:"claim-btn",attrs:{type:t.type,id:e.asset_id}}):n("div",{staticClass:"blank2"}),t._v(" "),t.show.localRepair?n("LocalAutoRepairButton",{staticClass:"repair-btn",attrs:{type:t.type,id:e.asset_id}}):n("div",{staticClass:"blank2"}),t._v(" "),n("div",{staticClass:"blank2"})],1)})),0)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AutoClaimButton:n(336).default,CounterV2:n(324).default,LocalAutoClaimButton:n(325).default})}}]);